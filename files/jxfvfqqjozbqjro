app.controller('PopularItemsController', function ($scope, $routeParams, itemsService) {
    $scope.ctrlName = "popular";

    $scope.showLoader = showLoader;
    $scope.hideLoader = hideLoader;
    $scope.showLoader();

    $scope.page = ($routeParams.page) ? parseInt($routeParams.page) : 0;
    $scope.pageStr = ($routeParams.page) ? $routeParams.page : "0";

    $scope.filter = ($routeParams.filter) ? $routeParams.filter : "";

    if ($scope.filter) {
        itemsService.getArchiveItems(function(data, status) {

            if (status < 200 || status >= 300)
                return;

            $scope.items = data;
            $scope.hideLoader();
        });
    }
    else {
        itemsService.getPopularItems($scope.page, function(data, status) {

            if (status < 200 || status >= 300)
                return;

            $scope.items = data;
            $scope.hideLoader();
        });
    }

    $scope.like = function(id) {
        itemsService.like(id, function(data, status) {
            if (status < 200 || status >= 300)
                return;

            $scope.response = data;
        });
    };

});

app.controller('LatestItemsController', function ($scope, $routeParams, itemsService) {
    $scope.ctrlName = "latest";

    $scope.showLoader = showLoader;
    $scope.hideLoader = hideLoader;
    $scope.showLoader();

    $scope.page = ($routeParams.page) ? parseInt($routeParams.page) : 0;
    $scope.pageStr = ($routeParams.page) ? $routeParams.page : "0";

    $scope.filter = ($routeParams.filter) ? $routeParams.filter : "";


    itemsService.getLatestItems($scope.page, function(data, status) {

        if (status < 200 || status >= 300)
            return;

        $scope.items = data;
        $scope.hideLoader();
    });

    $scope.like = function(id) {
        itemsService.like(id, function(data, status) {
            if (status < 200 || status >= 300)
                return;

            $scope.response = data;
        });
    };
});

app.controller('ArchiveItemsController', function ($scope, $routeParams, itemsService) {
    $scope.ctrlName = "archive";

    $scope.showLoader = showLoader;
    $scope.hideLoader = hideLoader;
    $scope.showLoader();

    itemsService.getArchiveItems(function(data, status) {

        if (status < 200 || status >= 300)
            return;

        $scope.items = data;
        $scope.hideLoader();
    });
});

app.controller('SimpleController', function ($scope, itemsService) {});
